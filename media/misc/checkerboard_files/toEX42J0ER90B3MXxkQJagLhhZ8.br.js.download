var titleClass=".ra_car_title",adBlockContainerClass=".ra_car_block",containerOverlayClass=".ra_overlay_container",poleEleId="#pole",slideBarClass=".b_slidebar",slideContainerClass=".b_slidesContainer",viewportClass=".b_viewport",nextBtnClass=".next",prevBtnClass=".prev",expandButtonClass=".ra_expandButton",collapseButtonClass=".ra_collapse_bttn",slideExperienceClass=".b_slideexp",titleElement=_d.querySelector(titleClass),adBlockContainerElement=_d.querySelector(adBlockContainerClass),isExpandDownLayout=!1;if(titleElement!==null&&adBlockContainerElement!==null){var slideClass=".slide",carouselMvClass_1="adsMvCarousel",visibleSlidesCount_1=0,carouselClass=".ta_carousel",overlay_1=_d.querySelector(containerOverlayClass),poleElement=_d.querySelector(poleEleId),slidebarElement_1=poleElement.querySelector(slideBarClass),container_1=_d.querySelector(slideContainerClass),viewportElement_1=overlay_1.querySelector(viewportClass),nextBtn_1=overlay_1.querySelector(nextBtnClass),prevBtn_1=overlay_1.querySelector(prevBtnClass),collapseButton=_d.querySelector(collapseButtonClass),expandButton=_d.querySelector(expandButtonClass),slideExperienceElement=_d.querySelector(slideExperienceClass),slides_1=poleElement.querySelectorAll(slideClass),carouselEle=poleElement.querySelector(carouselMvClass_1),carouselId_1=carouselEle?carouselEle.getAttribute("carouselid"):"",scrollHeightEachFrame_1=20,carousel_1=poleElement.querySelector(carouselClass),clickEvent="click",originalHeight_1=overlay_1.style.maxHeight,isExpanded_1=!1,adsMVLogSent_1=!1,timer_1,scrollTimeout_1,mvHandler_1,kValue_1=slideExperienceElement.getAttribute("data-k"),initHandler=function(){mvHandler_1=new RichAdsMVHandler.MVHandler(slides_1,overlay_1);mvHandler_1.initMvData();getVisibleSlidesIndices();visibleSlidesCount_1=mvHandler_1.sendMvData()},onTitleClicked=function(n){var t,i;isExpandDownLayout||(adBlockContainerElement.classList.add("ra_expanddown"),slidebarElement_1.style.height="auto",t=slidebarElement_1.offsetHeight,viewportElement_1!==null&&(viewportElement_1.style.height=t+"px",viewportElement_1.parentElement&&(viewportElement_1.parentElement.style.height=t+"px")),nextBtn_1.classList.add("disabled"),prevBtn_1.classList.add("disabled"),carousel_1.classList.remove(carouselMvClass_1),titleElement.classList.add("clicked"),i=adBlockContainerElement.offsetTop,handleScroll(i),handleExpanded(),isExpanded_1=!0,isExpandDownLayout=!0,Log.Log("Click","Button","AdsCarouselTitleClick",!1,"Component","RichAdsCarousel","K",kValue_1),sj_sp(n),sj_pd(n))},handleScroll=function(n){var t=null;cancelAnimationFrame(t);t=requestAnimationFrame(function i(){var r=_d.body.scrollTop||_d.documentElement.scrollTop||0;r<n?(_d.body.scrollTop=_d.documentElement.scrollTop=Math.min(n,r+scrollHeightEachFrame_1),t=requestAnimationFrame(i)):cancelAnimationFrame(t)})},onActionButtonClicked=function(n){if(isExpanded_1=!isExpanded_1,isExpanded_1)handleExpanded();else{container_1.setAttribute("aria-expanded","false");overlay_1.style.maxHeight=originalHeight_1;adBlockContainerElement.classList.remove("exp");var t=adBlockContainerElement.getBoundingClientRect().top;t>0?adBlockContainerElement.scrollTo(0,t):adBlockContainerElement.scrollIntoView()}Log.Log("Click","Button",n,!1,"Component","RichAdsCarousel")},handleExpanded=function(){container_1.setAttribute("aria-expanded","true");overlay_1.style.removeProperty("max-height");adBlockContainerElement.classList.add("exp");adsMVLogSent_1||(adsMVLogSent_1=!adsMVLogSent_1,visibleSlidesCount_1=mvHandler_1.sendMvData())},onCollapseButtonClicked=function(n){onActionButtonClicked("Collapse");sj_sp(n);sj_pd(n)},onExpandButtonClicked=function(n){onActionButtonClicked("Expand");sj_sp(n);sj_pd(n)},onPageScroll=function(){visibleSlidesCount_1!==slides_1.length&&(timer_1&&clearTimeout(timer_1),timer_1=setTimeout(function(){visibleSlidesCount_1=mvHandler_1.sendMvData()},scrollTimeout_1))};function getVisibleSlidesIndices(){if(!isExpandDownLayout){var n=SlideExperience.getVisibleSlidesIndices(carouselId_1);visibleSlidesCount_1=mvHandler_1.setVisibleSlides(n)}}sj_be(titleElement,clickEvent,function(n){onTitleClicked(n)});sj_be(collapseButton,clickEvent,function(n){onCollapseButtonClicked(n)});sj_be(expandButton,clickEvent,function(n){onExpandButtonClicked(n)});sj_be(window,"scroll",function(n){onPageScroll(n)});sj_evt.bind("slideexp_init_done",initHandler,!0);sj_evt.bind("slideexp_scroll",getVisibleSlidesIndices,!0);sj_evt.bind("slideexp_rotate",getVisibleSlidesIndices,!0);sj_evt.bind("slideexp_slideprev_move",getVisibleSlidesIndices,!0);sj_evt.bind("slideexp_slidenext_move",getVisibleSlidesIndices,!0)}