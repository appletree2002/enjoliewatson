var SlideExpVisibilityTracking_FixMop;(function(n){function o(n){var k=n[1],s,h,y,d,a,p,v,o,w,b;if(!k)return null;if((s=c(k),s!=null)&&(h=s.attributes.carouselid.value,y=s.getElementsByClassName("adsMvC"),!(y.length<1))){if(!r[h])for(t[h]==null&&(t[h]=new Array(y.length)),o=0;o<y.length;o++)t[h][o]=!1;if(!e(s)){d=i.length;i[d]=s;u[d]=k;f||(l(),f=!0);return}for(a=[],p="",s.attributes.parentCarouselId!=null&&(p=s.attributes.parentCarouselId.value),v=SlideExperience.getVisibleSlidesIndices(h),o=0;o<v.length;o++)v[o]>=y.length||t[h][v[o]]||p!=""&&t[p][v[o]]||(w=y[v[o]],w&&w.hasAttribute("mv-data")&&(b=w.attributes["mv-data"].value,b&&b.length!==0&&(a.push(b),t[h][v[o]]=!0,p!=""&&(t[p][v[o]]=!0))));a.length>0?(sj_plog("CI.AdImpression","Ads",a.join(),"Event.AdImpression"),sj_logToAES(a)):r[h]||(a=["init"]);r[h]=!0;s.attributes.testmv&&a.length>0&&(s.attributes.testmv.value=a.join())}}function s(n){var e=n[1],o=n[2],r,t,u,i,f;o||(r=_ge(e),r)&&(t=r.parentElement,t&&t.className.indexOf("adsMvCarouselToggle")!=-1)&&(u=t.previousElementSibling,u)&&((i=u.getElementsByClassName("b_slidebar"),!i||i.length<1)||(f=i[0],sj_evt.fire("slideexp_expanded",f.id)))}function h(){if(i&&i.length>0)for(var n=0;n<i.length;)e(i[n])?(sj_evt.fire("slideexp_expanded",u[n]),i.splice(n,1),u.splice(n,1)):n++}function c(n){for(var t,r=document.getElementsByClassName("adsMvCarousel"),i=0;i<r.length;i++)if(t=r[i],t.attributes.carouselid&&n.indexOf(t.attributes.carouselid.value)>=0)return t.offsetParent!==null?t:null;return null}function e(n){if(!n||!n.getBoundingClientRect)return!1;if(n.clientWidth&&n.clientHeight)try{var t=n.getBoundingClientRect(),i=t.top+n.clientHeight<0,r=t.top>window.innerHeight;return!i&&!r}catch(u){return!1}return!1}function l(){window.addEventListener("resize",n.changeCarouselVisibility);var t;window.addEventListener("scroll",function(){t&&window.clearTimeout(t);t=window.setTimeout(n.changeCarouselVisibility,100)})}var t=[[]],r=[],i=[],u=[],f=!1;n.reportItemVisibilityExp=o;n.reportVisibilityExp=s;n.changeCarouselVisibility=h})(SlideExpVisibilityTracking_FixMop||(SlideExpVisibilityTracking_FixMop={}));sj_evt.bind("exptoggle",SlideExpVisibilityTracking_FixMop.reportVisibilityExp);sj_evt.bind("slideexp_init_done",SlideExpVisibilityTracking_FixMop.reportItemVisibilityExp,!0);sj_evt.bind("slideexp_scroll",SlideExpVisibilityTracking_FixMop.reportItemVisibilityExp,!0);sj_evt.bind("slideexp_rotate",SlideExpVisibilityTracking_FixMop.reportItemVisibilityExp,!0);sj_evt.bind("slideexp_slideprev_move",SlideExpVisibilityTracking_FixMop.reportItemVisibilityExp,!0);sj_evt.bind("slideexp_slidenext_move",SlideExpVisibilityTracking_FixMop.reportItemVisibilityExp,!0);sj_evt.bind("slideexp_expanded",SlideExpVisibilityTracking_FixMop.reportItemVisibilityExp,!0);sj_evt.bind("onProductAdsCarouselExpanded",SlideExpVisibilityTracking_FixMop.reportItemVisibilityExp,!0)